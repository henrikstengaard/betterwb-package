; BetterWB Package Install Script
; -------------------------------
;
; Author: Henrik Noerfjand Stengaard
; Date: 2017-04-14
;
; This script extracts and installs zip files for BetterWB Package. 


echo "Installing 'MISC31 #1'..."
copy >NIL: PACKAGEDIR:BetterWB.readme.txt#? SYSTEMDIR:Locale/Help
unzip >NIL: -o PACKAGEDIR:BetterWB1.zip -d SYSTEMDIR:


echo "Installing 'TOOLS31 #2'..."
unzip >NIL: -o PACKAGEDIR:BetterWB2.zip -d SYSTEMDIR:


echo "Installing 'BONUS31 #3'..."
unzip >NIL: -o PACKAGEDIR:BetterWB3.zip -d SYSTEMDIR:


echo "Installing 'DOCS31 #4'..."
unzip >NIL: -o PACKAGEDIR:BetterWB4.zip -d SYSTEMDIR:


echo "Installing 'ICONS31 #5'..."
unzip >NIL: -o PACKAGEDIR:BetterWB5.zip -d SYSTEMDIR:


echo "Installing 'DRIVERS31 #6'..."
unzip >NIL: -o PACKAGEDIR:BetterWB6.zip -d SYSTEMDIR:


; Delete obsolete files
delete >NIL: SYSTEMDIR:S/BRUtab force all
delete >NIL: SYSTEMDIR:S/HDBackup.config force all
delete >NIL: SYSTEMDIR:Tools/calculator force all
delete >NIL: SYSTEMDIR:Tools/calculator.info force all
delete >NIL: SYSTEMDIR:Tools/BRU force all
delete >NIL: SYSTEMDIR:Tools/HDBackup.help force all
delete >NIL: SYSTEMDIR:Tools/HDBackup.info force all
delete >NIL: SYSTEMDIR:Tools/HDBackup force all
delete >NIL: SYSTEMDIR:Tools/Showconfig.info force all
delete >NIL: SYSTEMDIR:Tools/Showconfig force all
delete >NIL: SYSTEMDIR:System/NoFastMem force all
delete >NIL: SYSTEMDIR:System/NoFastMem.info force all
delete >NIL: SYSTEMDIR:Tools/Commodities/Clicktofront force all
delete >NIL: SYSTEMDIR:Tools/Commodities/Clicktofront.info force all
delete >NIL: SYSTEMDIR:Tools/PrepCard.info force all


; Fix read write execute flags
protect >NIL: SYSTEMDIR:#? +rwe ALL


; Fix CBM Pure bit bug
Protect SYSTEMDIR:C/AddBuffers +p
Protect SYSTEMDIR:C/AddDataTypes +p
Protect SYSTEMDIR:C/Assign +p
Protect SYSTEMDIR:C/Avail +p
Protect SYSTEMDIR:C/Break +p
Protect SYSTEMDIR:C/ChangeTaskPri +p
Protect SYSTEMDIR:C/ConClip +p
Protect SYSTEMDIR:C/Copy +p
Protect SYSTEMDIR:C/CPU +p
Protect SYSTEMDIR:C/Date +p
Protect SYSTEMDIR:C/Delete +p
Protect SYSTEMDIR:C/Dir +p
Protect SYSTEMDIR:C/DiskChange +p
Protect SYSTEMDIR:C/Ed +p
Protect SYSTEMDIR:C/Edit +p
Protect SYSTEMDIR:C/Eval +p
Protect SYSTEMDIR:C/Execute +p
Protect SYSTEMDIR:C/Filenote +p
Protect SYSTEMDIR:C/IconX +p
Protect SYSTEMDIR:C/Info +p
Protect SYSTEMDIR:C/Install +p
Protect SYSTEMDIR:C/Join +p
Protect SYSTEMDIR:C/List +p
Protect SYSTEMDIR:C/Lock +p
Protect SYSTEMDIR:C/MagTape +p
Protect SYSTEMDIR:C/MakeDir +p
Protect SYSTEMDIR:C/MakeLink +p
Protect SYSTEMDIR:C/Mount +p
Protect SYSTEMDIR:C/Protect +p
Protect SYSTEMDIR:C/Relabel +p
Protect SYSTEMDIR:C/RemRAD +p
Protect SYSTEMDIR:C/Rename +p
Protect SYSTEMDIR:C/RequestChoice +p
Protect SYSTEMDIR:C/RequestFile +p
Protect SYSTEMDIR:C/Search +p
Protect SYSTEMDIR:C/SetClock +p
Protect SYSTEMDIR:C/SetDate +p
Protect SYSTEMDIR:C/SetFont +p
Protect SYSTEMDIR:C/SetKeyboard +p
Protect SYSTEMDIR:C/Sort +p
Protect SYSTEMDIR:C/Status +p
Protect SYSTEMDIR:C/Type +p
Protect SYSTEMDIR:C/Version +p


; Add the S bit to some scripts
Protect SYSTEMDIR:System/Rebooter +s
Protect SYSTEMDIR:System/HardWiz +s
Protect SYSTEMDIR:Tools/PrepCard+ +s